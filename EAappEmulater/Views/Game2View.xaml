<UserControl
    x:Class="EAappEmulater.Views.Game2View"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:ui="clr-namespace:ModernWpf.Controls;assembly=ModernWpf"
    d:DesignHeight="600"
    d:DesignWidth="1000"
    DataContext="{Binding RelativeSource={RelativeSource Mode=Self}}"
    mc:Ignorable="d">

    <ScrollViewer x:Name="ScrollViewerRoot" Padding="3" CanContentScroll="False">
        <StackPanel>
            <!-- 支持的游戏 标题 -->
            <ui:IconHeader Title="支持的游戏" Icon="&#xE7FC;" FontSize="18" />
            <ItemsControl x:Name="ItemsControl_GameMenuInfos" ItemsSource="{Binding ObsCol_GameMenuInfos}">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <WrapPanel />
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <ui:GameMenu
                            Command="{Binding RunGameCommand}"
                            Command2="{Binding SetGameOptionCommand}"
                            CommandParameter="{Binding GameType}"
                            CommandParameter2="{Binding GameType}"
                            Image="{Binding Image}"
                            IsInstalled="{Binding IsInstalled}" />
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>

            <!-- 分隔空白 -->
            <Border Height="20" Background="Transparent" />

            <!-- 我的游戏 标题 -->
            <ui:IconHeader Title="我的游戏" Icon="&#xE8F1;" FontSize="18" />
            <ItemsControl x:Name="ItemsControl_OwnedGames" ItemsSource="{Binding ObsCol_OwnedGames}">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <WrapPanel />
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <ui:OwnedGameMenu 
                            GameName="{Binding Name}"
                            OfferId="{Binding OfferId}"
                            GameTypeText="{Binding GameType}"
                            DownloadCommand="{Binding DataContext.OpenDownloadSettingsCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                            DownloadCommandParameter="{Binding}" />
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </StackPanel>
    </ScrollViewer>

</UserControl>
